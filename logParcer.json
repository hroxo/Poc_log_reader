{
  "event_definitions": [
    {
      "event_type": "ITEM_MODIFIER",
      "match_type": "name",
      "match_value": "ItemSold",
      "conditions": [
        {
          "field": "DiscountAmount",
          "operator": "is_not_null_or_empty"
        },
        {
          "field": "DiscountDescription.1",
          "operator": "is_not_null_or_empty",
          "logical_operator": "or"
        }
      ],
      "fields_to_extract": {
        "UPC": { "target_name": "upc", "ftype": "string" },
        "ItemNumber": { "target_name": "item_number", "ftype": "int" },
        "DiscountAmount": { "target_name": "discount_amount", "ftype": "int" },
        "DiscountDescription.1": { "target_name": "discount_description", "ftype": "string" },
        "AssociatedItemNumber": { "target_name": "associated_item_number", "ftype": "int" },
        "RewardLocation": { "target_name": "reward_location", "ftype": "int" }
      }
    },
    {
      "event_type": "ITEM_SOLD",
      "match_type": "name",
      "match_value": "ItemSold",
      "fields_to_extract": {
        "Description": { "target_name": "description", "ftype": "string" },
        "UPC": { "target_name": "upc", "ftype": "string" },
        "Department": { "target_name": "department", "ftype": "string" },
        "ItemNumber": { "target_name": "item_number", "ftype": "int" },
        "Price": { "target_name": "price", "ftype": "int" },
        "ExtendedPrice": { "target_name": "extended_price", "ftype": "int" },
        "Quantity": { "target_name": "quantity", "ftype": "int" }
      }
    },
    {
      "event_type": "TRANSACTION_START",
      "match_type": "name",
      "match_value": "StartTransaction",
      "fields_to_extract": {}
    },
    {
      "event_type": "TRANSACTION_END",
      "match_type": "name",
      "match_value": "EndTransaction",
      "fields_to_extract": {}
    },
    {
      "event_type": "TENDER_ACCEPTED",
      "match_type": "name",
      "match_value": "TenderAccepted",
      "fields_to_extract": {
        "Amount": { "target_name": "amount", "ftype": "int" },
        "TenderType": { "target_name": "tender_type", "ftype": "string" },
        "Description": { "target_name": "description", "ftype": "string" }
      }
    },
    {
      "event_type": "ASSIST_MODE_ENTER",
      "match_type": "name",
      "match_value": "EnterAssistMode",
      "fields_to_extract": {}
    },
    {
      "event_type": "ASSIST_MODE_EXIT",
      "match_type": "name",
      "match_value": "ExitAssistMode",
      "fields_to_extract": {}
    },
    {
        "event_type": "TRANSACTION_SUMMARY",
        "match_type": "name",
        "match_value": "Totals",
        "fields_to_extract": {
            "TotalAmount": { "target_name": "total_amount", "ftype": "int" },
            "ItemCount": { "target_name": "item_count", "ftype": "int" },
            "BalanceDue": { "target_name": "balance_due", "ftype": "int" },
            "DiscountAmount": { "target_name": "discount_amount", "ftype": "int" }
        }
    }
  ],
  "default_event": {
    "event_type": "GENERIC_MESSAGE",
    "fields_to_extract": {
      "message_id": { "target_name": "message_id", "source_name": "message_id" },
      "message_name": { "target_name": "message_name", "source_name": "message_name" }
    }
  }
}

